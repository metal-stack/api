syntax = "proto3";

package metalstack.admin.v2;

import "buf/validate/validate.proto";
import "metalstack/api/v2/common.proto";
import "metalstack/api/v2/predefined_rules.proto";
import "metalstack/api/v2/project.proto";

// ProjectService serves project related functions
service ProjectService {
  // List projects based on various filter criteria
  rpc List(ProjectServiceListRequest) returns (ProjectServiceListResponse) {
    option (metalstack.api.v2.admin_roles) = ADMIN_ROLE_EDITOR;
    option (metalstack.api.v2.admin_roles) = ADMIN_ROLE_VIEWER;
    option (metalstack.api.v2.auditing) = AUDITING_EXCLUDED;
  }
}

// ProjectServiceListRequest is the request payload for the project list request
message ProjectServiceListRequest {
  // Tenant lists only projects of this tenant
  optional string tenant = 1 [(buf.validate.field).string.(metalstack.api.v2.is_name) = true];
  // Labels lists only projects containing the given labels
  optional metalstack.api.v2.Labels labels = 2;
}

// ProjectServiceListResponse is the response payload for the project list request
message ProjectServiceListResponse {
  // Projects is a list of all projects
  repeated metalstack.api.v2.Project projects = 1;
}
